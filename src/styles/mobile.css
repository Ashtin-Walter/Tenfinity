/* Mobile Optimizations with focus on iPhone 11 */
/* iPhone 11 dimensions: 414 x 896 pixels */

/* Base mobile styles */
@media screen and (max-width: 480px) {
  .App {
    padding: 0.5rem;
  }
  
  .app-header {
    padding: 0.75rem;
    margin-bottom: 0.5rem;
    border-radius: 8px;
  }
  
  .app-header h1 {
    font-size: 1.5rem;
  }
  
  .loader-logo {
    width: 32px;
    height: 32px;
    margin-right: 0.75rem;
  }
  
  .game-container {
    gap: 0.75rem;
  }
  
  .grid-board-container {
    max-width: 100%;
    aspect-ratio: 1/1;
  }
  
  .shapes-container {
    max-width: 100%;
  }
  
  .mobile-score-display {
    margin-bottom: 0.25rem;
  }
  
  .undo-btn {
    padding: 0.6rem;
    font-size: 0.9rem;
  }
  
  /* Adjust grid cells for better touch targets */
  .grid-cell-container {
    touch-action: none;
  }
  
  .grid-cell {
    border-radius: 3px;
  }
  
  /* Adjust shape pieces for better visibility */
  .shape-piece {
    border-radius: 3px;
  }
  
  /* Optimize modals for mobile */
  .game-over-modal,
  .settings-menu,
  .tutorial-modal {
    width: 95%;
    max-width: 400px;
    padding: 1.25rem;
    border-radius: 12px;
  }
  
  .settings-tabs {
    flex-wrap: wrap;
  }
  
  .settings-tab {
    flex: 1 1 auto;
    min-width: 60px;
    padding: 0.5rem 0.25rem;
  }
  
  .tab-icon {
    font-size: 1.2rem;
  }
  
  .tab-label {
    font-size: 0.7rem;
  }
}

/* iPhone 11 specific optimizations */
@media screen and (min-width: 375px) and (max-width: 414px) and (min-height: 800px) and (max-height: 896px) {
  :root {
    --touch-offset: 80px; /* Adjusted for iPhone 11 */
  }
  
  .App {
    padding: 0.75rem;
  }
  
  /* Optimize touch targets for iPhone 11 */
  .grid-cell-container {
    min-height: 36px;
    min-width: 36px;
  }
  
  /* Adjust floating drag shape position for iPhone 11 */
  .floating-drag-shape {
    transform: translateX(-50%) scale(1.1);
  }
  
  /* Optimize game board size for iPhone 11 */
  .grid-board-container {
    max-width: 380px;
    margin: 0 auto;
  }
  
  /* Optimize shape container for iPhone 11 */
  .shapes-container {
    max-width: 380px;
    margin: 0 auto;
  }
  
  /* Adjust score board for iPhone 11 */
  .score-board {
    padding: 0.6rem;
  }
  
  .score-value {
    font-size: 1.3rem;
  }
  
  /* Optimize for iPhone 11 notch */
  .app-header {
    padding-top: env(safe-area-inset-top, 0.75rem);
    padding-left: env(safe-area-inset-left, 0.75rem);
    padding-right: env(safe-area-inset-right, 0.75rem);
  }
  
  /* Optimize for iPhone 11 bottom area */
  .shapes-container {
    padding-bottom: env(safe-area-inset-bottom, 0.75rem);
  }
}

/* Landscape mode optimizations */
@media screen and (max-width: 896px) and (max-height: 414px) {
  .App.landscape {
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: auto 1fr;
    gap: 0.5rem;
  }
  
  .App.landscape .app-header {
    grid-column: 1 / -1;
  }
  
  .App.landscape .game-container {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 0.5rem;
  }
  
  .App.landscape .grid-board-container {
    grid-column: 1;
    height: calc(100vh - 120px);
    max-height: 400px;
    width: auto;
    aspect-ratio: 1/1;
  }
  
  .App.landscape .shapes-container {
    grid-column: 2;
    display: flex;
    flex-direction: column;
    justify-content: center;
  }
  
  .App.landscape .mobile-score-display {
    grid-column: 2;
    grid-row: 1;
  }
}

/* Touch interaction improvements */
.touching .grid-cell-container {
  transition: none;
}

.touching .grid-cell.preview {
  transition: all 0.1s ease;
}

/* Add safe area insets for modern iOS devices */
@supports (padding-top: env(safe-area-inset-top)) {
  .App {
    padding-left: env(safe-area-inset-left, 1rem);
    padding-right: env(safe-area-inset-right, 1rem);
    padding-top: env(safe-area-inset-top, 1rem);
    padding-bottom: env(safe-area-inset-bottom, 1rem);
  }
}